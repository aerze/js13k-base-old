<!DOCTYPE html>
<html>
<head>
    <title></title>
        <style>
          body{font-family:Verdana,Arial,sans-serif;font-size:10px;height:100vh;width:100vw;margin:0}canvas{padding:0;margin:auto;display:block;outline:0;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;-ms-interpolation-mode:nearest-neighbor;image-rendering:pixelated;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(255,255,255,0)}
        </style>
</head>
<body>
      <script>
        for(var h="function"==typeof Object.defineProperties?Object.defineProperty:function(d,e,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[e]=c.value)},k="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,m=["Array","prototype","fill"],n=0;n<m.length-1;n++){var p=m[n];p in k||(k[p]={});k=k[p]}
var q=m[m.length-1],r=k[q],t=r?r:function(d,e,c){var f=this.length||0;0>e&&(e=Math.max(0,f+e));if(null==c||c>f)c=f;c=Number(c);0>c&&(c=Math.max(0,f+c));for(e=Number(e||0);e<c;e++)this[e]=d;return this};t!=r&&null!=t&&h(k,q,{configurable:!0,writable:!0,value:t});
(function(d){function e(f){if(c[f])return c[f].f;var g=c[f]={f:{},id:f,loaded:!1};d[f].call(g.f,g,g.f,e);g.loaded=!0;return g.f}var c={};e.c=d;e.a=c;e.b="";return e(0)})([function(){function d(a){this.b=a.getContext("webgl2");if(!this.b)throw Error("Missing WebGL2 context");this.l=d.b(this.b);this.c=this.c.bind(this);this.g=!0;this.h=0}function e(a){console.log(a.key,a.keyCode);c[f[a.keyCode]||0]="keydown"===a.type}var c=Array(10).fill(!1),f={8:9,37:3,38:1,39:4,40:2,65:3,87:1,68:4,83:2,69:5,81:6,
82:7,70:8,undefined:0};d.a=function(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);b=a.getShaderParameter(c,a.COMPILE_STATUS);var d=a.getShaderInfoLog(c);d&&console.log(d);if(b)return c;a.deleteShader(c);throw Error("Shader failed to compile");};d.b=function(a){var b=a.createProgram(),c=d.a(a,"#version 300 es\n\tin vec2 a_pos;\n\n\tuniform vec2 u_res;\n\tuniform mat3 u_mat;\n\n\tvoid main() {\n\t  vec2 pos = (u_mat * vec3(a_pos, 1)).xy;\n\t  vec2 zOne = pos / u_res;\n\t  vec2 zTwo = zOne * 2.0;\n\t  vec2 clip = zTwo - 1.0;\n\t  gl_Position = vec4(clip * vec2(1, -1), 0, 1);\n\t}",
a.VERTEX_SHADER),e=d.a(a,"#version 300 es\n\tprecision mediump float;\n\tuniform vec4 u_col;\n\tout vec4 outColor;\n\tvoid main() {\n\t  outColor = u_col;\n\t}",a.FRAGMENT_SHADER);a.attachShader(b,c);a.attachShader(b,e);a.linkProgram(b);c=a.getProgramParameter(b,a.LINK_STATUS);(e=a.getProgramInfoLog(b))&&console.log(e);if(c)return b;a.deleteProgram(b);throw Error("Program failed to link");};d.c=function(a){var b=a.clientWidth,c=a.clientHeight,d=a.height,e=Math.floor(1*c);if(a.width!==Math.floor(1*
b)||d!==e)a.width=b,a.height=c};d.prototype.D=function(){var a=this.b,b=this.l;this.j=a.getAttribLocation(b,"a_pos");this.s=a.getUniformLocation(b,"u_res");this.C=a.getUniformLocation(b,"u_col");this.F=a.getUniformLocation(b,"u_mat");this.o=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.o);a.bufferData(a.ARRAY_BUFFER,new Float32Array([10,20,80,20,10,30,10,30,80,20,80,30]),a.DYNAMIC_DRAW);this.m=a.createVertexArray();a.bindVertexArray(this.m);a.enableVertexAttribArray(this.j);a.vertexAttribPointer(this.j,
2,a.FLOAT,!1,0,0);window.addEventListener("keydown",e);window.addEventListener("keyup",e);this.scale=[1,1];this.angle=0;this.a=[0,0];this.c()};d.prototype.c=function(a){var b=this.b,c=this.l;console.log("delta",(a||0)-this.h);this.h=a;d.c(b.canvas);b.viewport(0,0,b.canvas.width,b.canvas.height);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);b.useProgram(c);b.bindVertexArray(this.m);b.uniform2f(this.s,b.canvas.width,b.canvas.height);this.B();b.drawArrays(b.TRIANGLES,0,18);this.g&&requestAnimationFrame(this.c)};
d.prototype.B=function(){console.log(c[2]);c[7]&&(this.scale=this.scale.map(function(a){return a+.2}));c[8]&&(this.scale=this.scale.map(function(a){return a-.2}));c[5]&&(this.angle-=.02*Math.PI);c[6]&&(this.angle+=.02*Math.PI);c[1]&&(this.a[1]-=5);c[2]&&(this.a[1]+=5);c[3]&&(this.a[0]-=5);c[4]&&(this.a[0]+=5);c[9]&&(this.g=!1);this.b.uniformMatrix3fv(this.F,!1,this.i(this.i(this.A(this.a[0],this.a[1]),this.w(this.angle)),this.u(this.scale[0],this.scale[1])));this.v(this.b)};d.prototype.A=function(a,
b){return[1,0,0,0,1,0,a,b,1]};d.prototype.w=function(a){var b=Math.cos(a);a=Math.sin(a);return[b,-a,0,a,b,0,0,0,1]};d.prototype.u=function(a,b){return[a,0,0,0,b,0,0,0,1]};d.prototype.i=function(a,b){return[b[0]*a[0]+b[1]*a[3]+b[2]*a[6],b[0]*a[1]+b[1]*a[4]+b[2]*a[7],b[0]*a[2]+b[1]*a[5]+b[2]*a[8],b[3]*a[0]+b[4]*a[3]+b[5]*a[6],b[3]*a[1]+b[4]*a[4]+b[5]*a[7],b[3]*a[2]+b[4]*a[5]+b[5]*a[8],b[6]*a[0]+b[7]*a[3]+b[8]*a[6],b[6]*a[1]+b[7]*a[4]+b[8]*a[7],b[6]*a[2]+b[7]*a[5]+b[8]*a[8]]};d.prototype.v=function(a){a.bufferData(a.ARRAY_BUFFER,
new Float32Array([0,0,30,0,0,150,0,150,30,0,30,150,30,0,100,0,30,30,30,30,100,0,100,30,30,60,0+200/3,60,30,90,30,90,0+200/3,60,0+200/3,90]),a.STATIC_DRAW);a.uniform4f(this.C,1,0,1,1)};var g=window.document.body,l=document.createElement("canvas");l.width=g.clientWidth;l.height=g.clientHeight;g.appendChild(l);(new d(l)).D()}]);

      </script>
</body>
</html>
